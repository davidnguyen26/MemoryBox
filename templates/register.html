{% extends "base.html" %}

{% block og_title %}Register - MemoryBox{% endblock %}
{% block og_description %}Join MemoryBox to share and preserve your class memories from A4K53 Van Lam High School.{% endblock %}
{% block og_url %}/register{% endblock %}
{% block twitter_title %}Register - MemoryBox{% endblock %}
{% block twitter_description %}Join MemoryBox to share class memories.{% endblock %}
{% block canonical_url %}/register{% endblock %}

{% block title %}Register - MemoryBox{% endblock %}

{% block extra_css %}
<link rel="preload" href="{{ url_for('static', filename='css/auth.min.css') }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/auth.min.css') }}">
</noscript>
{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-card">
        <div class="auth-header">
            <h2>Register</h2>
            <p>Create an account to start sharing</p>
        </div>
        
        <form method="POST">
            <div class="form-group">
                <label class="form-label">Username</label>
                <input type="text" class="form-control" name="username" 
                       placeholder="Choose a username" required autofocus>
                <small class="form-text">This name will be displayed on your uploaded images</small>
            </div>
            
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-control" name="email" 
                       placeholder="your@email.com" required>
            </div>
            
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" class="form-control" name="password" id="password"
                       placeholder="At least 6 characters" required>
                <div class="password-strength">
                    <div class="strength-bar">
                        <div class="strength-fill" id="strengthFill"></div>
                    </div>
                    <small class="strength-text" id="strengthText"></small>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Confirm Password</label>
                <input type="password" class="form-control" name="confirm_password" 
                       placeholder="Re-enter your password" required>
            </div>
            
            <button type="submit" class="btn-auth">
                <i class="bi bi-person-plus"></i> Create Account
            </button>
        </form>
        
        <div class="auth-footer">
            <p>Already have an account? <a href="{{ url_for('login') }}">Login</a></p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
const pwd = document.getElementById('password');
const fill = document.getElementById('strengthFill');
const text = document.getElementById('strengthText');

pwd.addEventListener('input', function() {
    const p = this.value;
    let strength = 0;
    
    if (p.length >= 6) strength += 25;
    if (p.length >= 10) strength += 25;
    if (/[a-z]/.test(p) && /[A-Z]/.test(p)) strength += 25;
    if (/\d/.test(p)) strength += 15;
    if (/[@$!%*?&]/.test(p)) strength += 10;
    
    fill.style.width = strength + '%';
    
    if (strength < 40) {
        fill.className = 'strength-fill strength-weak';
        text.textContent = 'Weak';
        text.className = 'strength-text text-weak';
    } else if (strength < 70) {
        fill.className = 'strength-fill strength-medium';
        text.textContent = 'Medium';
        text.className = 'strength-text text-medium';
    } else {
        fill.className = 'strength-fill strength-strong';
        text.textContent = 'Strong';
        text.className = 'strength-text text-strong';
    }
});
</script>
{% endblock %}